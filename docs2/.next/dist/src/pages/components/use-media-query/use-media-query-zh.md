module.exports = "---\ntitle: Reactä¸­çš„åª’ä½“æŸ¥è¯¢ç”¨äºå“åº”å¼è®¾è®¡\n---\n\n# useMediaQuery\n\n<p class=\"description\">è¿™æ˜¯Reactçš„CSSåª’ä½“æŸ¥è¯¢é’©å­ã€‚ å®ƒä¾¦å¬ä¸CSSåª’ä½“æŸ¥è¯¢çš„åŒ¹é…ã€‚ å®ƒå…è®¸æ ¹æ®æŸ¥è¯¢æ˜¯å¦åŒ¹é…æ¥å‘ˆç°ç»„ä»¶ã€‚</p>\n\nä¸€äº›é‡è¦ç‰¹ç‚¹ï¼š\n\n- âš›ï¸å®ƒæœ‰ä¸€ä¸ªæƒ¯ç”¨çš„React APIã€‚\n- ğŸš€å®ƒå…·æœ‰é«˜æ€§èƒ½ï¼Œå®ƒä¼šè§‚å¯Ÿæ–‡æ¡£ä»¥æ£€æµ‹å…¶åª’ä½“æŸ¥è¯¢ä½•æ—¶å‘ç”Ÿæ›´æ”¹ï¼Œè€Œä¸æ˜¯å®šæœŸè½®è¯¢å€¼ã€‚\n- ğŸ“¦ [1kB å·²å‹ç¼©çš„åŒ…](/size-snapshot)ã€‚\n- ğŸ¤–å®ƒæ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚\n\n## ç®€å•çš„åª’ä½“æŸ¥è¯¢\n\næ‚¨åº”è¯¥ä¸ºæŒ‚é’©çš„ç¬¬ä¸€ä¸ªå‚æ•°æä¾›åª’ä½“æŸ¥è¯¢ã€‚ The media query string can be any valid CSS media query, e.g. [`'(prefers-color-scheme: dark)'`](/customization/palette/#user-preference).\n\n{{\"demo\": \"pages/components/use-media-query/SimpleMediaQuery.js\", \"defaultCodeOpen\": true}}\n\nâš ï¸ You can't use `'print'` per browsers limitation, e.g. [Firefox](https://bugzilla.mozilla.org/show_bug.cgi?id=774398).\n\n## ä½¿ç”¨Material-UIçš„æ–­ç‚¹åŠ©æ‰‹\n\nYou can use Material-UI's [breakpoint helpers](/customization/breakpoints/) as follows:\n\n```jsx\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nfunction MyComponent() {\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n\n  return <span>{`theme.breakpoints.up('sm') matches: ${matches}`}</span>;\n}\n```\n\n{{\"demo\": \"pages/components/use-media-query/ThemeHelper.js\", \"defaultCodeOpen\": false}}\n\nAlternatively, you can use a callback function, accepting the theme as a first argument:\n\n```jsx\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nfunction MyComponent() {\n  const matches = useMediaQuery(theme => theme.breakpoints.up('sm'));\n\n  return <span>{`theme.breakpoints.up('sm') matches: ${matches}`}</span>;\n}\n```\n\nâš ï¸ There is **no default** theme support, you have to inject it in a parent theme provider.\n\n## ä½¿ç”¨JavaScriptè¯­æ³•\n\nYou can use [json2mq](https://github.com/akiran/json2mq) to generate media query string from a JavaScript object.\n\n{{\"demo\": \"pages/components/use-media-query/JavaScriptMedia.js\", \"defaultCodeOpen\": true}}\n\n## æµ‹è¯•\n\nYou need an implementation of [matchMedia](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia) in your test environment.\n\nFor instance, [jsdom doesn't support it yet](https://github.com/jsdom/jsdom/blob/master/test/web-platform-tests/to-upstream/html/browsers/the-window-object/window-properties-dont-upstream.html). You should polyfill it. Using [css-mediaquery](https://github.com/ericf/css-mediaquery) to emulate it is recommended.\n\n```js\nimport mediaQuery from 'css-mediaquery';\n\nfunction createMatchMedia(width) {\n  return query => ({\n    matches: mediaQuery.match(query, { width }),\n    addListener: () => {},\n    removeListener: () => {},\n  });\n}\n\ndescribe('MyTests', () => {\n  beforeAll(() => {\n    window.matchMedia = createMatchMedia(window.innerWidth);\n  });\n});\n```\n\n## æœåŠ¡å™¨ç«¯å‘ˆç°\n\n> âš ï¸ Server-side rendering and client-side media queries are fundamentally at odds. Be aware of the tradeoff. The support can only be partial.\n\nTry relying on client-side CSS media queries first. For instance, you could use:\n\n- [`<Box display>`](/system/display/#hiding-elements)\n- [`themes.breakpoints.up(x)`](/customization/breakpoints/#css-media-queries)\n- or [`<Hidden implementation=\"css\">`](/components/hidden/#css)\n\nIf none of the above alternatives are an option, you can proceed reading this section of the documentation.\n\nFirst, you need to guess the characteristics of the client request, from the server. You have the choice between using:\n\n- **User agent**. Parse the user agent string of the client to extract information. Using [ua-parser-js](https://github.com/faisalman/ua-parser-js) to parse the user agent is recommended.\n- **Client hints**. Read the hints the client is sending to the server. Be aware that this feature is [not supported everywhere](https://caniuse.com/#search=client%20hint).\n\nFinally, you need to provide an implementation of [matchMedia](https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia) to the `useMediaQuery` with the previously guessed characteristics. Using [css-mediaquery](https://github.com/ericf/css-mediaquery) to emulate matchMedia is recommended.\n\nFor instance on the server-side:\n\n```js\nimport ReactDOMServer from 'react-dom/server';\nimport parser from 'ua-parser-js';\nimport mediaQuery from 'css-mediaquery';\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nfunction handleRender(req, res) {\n  const deviceType = parser(req.headers['user-agent']).device.type || 'desktop';\n  const ssrMatchMedia = query => ({\n    matches: mediaQuery.match(query, {\n      // The estimated CSS width of the browser.\n      width: deviceType === 'mobile' ? '0px' : '1024px',\n    }),\n  });\n\n  const html = ReactDOMServer.renderToString(\n    <ThemeProvider\n      theme={{\n        props: {\n          // Change the default options of useMediaQuery\n          MuiUseMediaQuery: { ssrMatchMedia },\n        },\n      }}\n    >\n      <App />\n    </ThemeProvider>,\n  );\n\n  // â€¦\n}\n```\n\n{{\"demo\": \"pages/components/use-media-query/ServerSide.js\", \"defaultCodeOpen\": false}}\n\nMake sure you provide the same custom match media implementation to the client-side to guarantee a hydration match.\n\n## è¿å¾™è‡ª `withWidth()`\n\n`withWidth()` é«˜é˜¶ç»„ä»¶æ³¨å…¥é¡µé¢çš„å±å¹•å®½åº¦ã€‚ æ‚¨å¯ä»¥å¯¹ `useWidth` é’©å­é‡ç”¨ç›¸åŒçš„æ“ä½œï¼š\n\n{{\"demo\": \"pages/components/use-media-query/UseWidth.js\"}}\n\n## API\n\n### `useMediaQuery(query, [options]) => matches`\n\n#### å‚æ•°\n\n1. `query` (*String* | *Function*): A string representing the media query to handle or a callback function accepting the theme (in the context) that returns a string.\n2. `options` (*Object* [optional]): \n  - `options.defaultMatches` ï¼ˆ*å¸ƒå°”å€¼* [optional]ï¼‰ï¼š ä½œä¸º `window.matchMedia()` åœ¨æœåŠ¡å™¨ä¸Šä¸å¯ç”¨ï¼Œ æˆ‘ä»¬åœ¨ç¬¬ä¸€æ¬¡å®‰è£…æ—¶è¿”å›é»˜è®¤åŒ¹é…ã€‚ é»˜è®¤å€¼ä¸º `false`ã€‚\n  - `options.matchMedia` (*Function* [optional]) You can provide your own implementation of *matchMedia*. This can be used for handling an iframe content window.\n  - `options.noSsr` (*Boolean* [optional]): é»˜è®¤å€¼ä¸º`false`ã€‚ ä¸ºäº†æ‰§è¡ŒæœåŠ¡å™¨ç«¯å‘ˆç°åè°ƒï¼Œå®ƒéœ€è¦å‘ˆç°ä¸¤æ¬¡ã€‚ ç¬¬ä¸€æ¬¡æ²¡æœ‰ä»»ä½•ä¸œè¥¿ï¼Œç¬¬äºŒæ¬¡ä¸å­©å­ä»¬åœ¨ä¸€èµ·ã€‚ è¿™ç§åŒéæ¸²æŸ“å‘¨æœŸæœ‰ä¸€ä¸ªç¼ºç‚¹ã€‚ It's slower. You can set this flag to `true` if you are **not doing server-side rendering**.\n  - `options.ssrMatchMedia` (*Function* [optional]) You can provide your own implementation of *matchMedia* in a [server-side rendering context](#server-side-rendering).\n\nNote: You can change the default options using the [`default props`](/customization/globals/#default-props) feature of the theme with the `MuiUseMediaQuery` key.\n\n#### è¿”å›ç»“æœ\n\n` matches `ï¼šå¦‚æœæ–‡æ¡£å½“å‰èƒ½å¤ŸåŒ¹é…è¿™ä¸ªåª’ä½“æŸ¥è¯¢ï¼ŒMatches æ˜¯ `true` ï¼Œå¦åˆ™ä¸º `false` ã€‚\n\n#### ä¾‹å­\n\n```jsx\nimport React from 'react';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nexport default function SimpleMediaQuery() {\n  const matches = useMediaQuery('(min-width:600px)');\n\n  return <span>{`(min-width:600px) matches: ${matches}`}</span>;\n}\n```"