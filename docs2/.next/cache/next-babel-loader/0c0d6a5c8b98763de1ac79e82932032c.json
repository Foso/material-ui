{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Map from \"@babel/runtime-corejs2/core-js/map\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { create } from 'jss';\nimport { withStyles, useTheme, jssPreset, StylesProvider } from \"../../../../packages/material-ui/src/styles\";\nimport NoSsr from \"../../../../packages/material-ui/src/NoSsr\";\nimport rtl from 'jss-rtl';\nimport Frame from 'react-frame-component';\nimport DemoErrorBoundary from \"./DemoErrorBoundary\";\n\nconst styles = theme => ({\n  frame: {\n    backgroundColor: theme.palette.background.default,\n    flexGrow: 1,\n    height: 400,\n    border: 'none',\n    boxShadow: theme.shadows[1]\n  }\n});\n\nvar _ref = __jsx(\"div\", {\n  id: \"demo-frame-jss\"\n});\n\nfunction DemoFrame(props) {\n  const {\n    children,\n    classes\n  } = props,\n        other = _objectWithoutProperties(props, [\"children\", \"classes\"]);\n\n  const theme = useTheme();\n  const [state, setState] = React.useState({\n    ready: false\n  });\n  const instanceRef = React.useRef();\n  const handleRef = React.useCallback(ref => {\n    instanceRef.current = {\n      contentDocument: ref ? ref.node.contentDocument : null,\n      contentWindow: ref ? ref.node.contentWindow : null\n    };\n  }, []);\n\n  const onContentDidMount = () => {\n    setState({\n      ready: true,\n      jss: create({\n        plugins: [...jssPreset().plugins, rtl()],\n        insertionPoint: instanceRef.current.contentWindow['demo-frame-jss']\n      }),\n      sheetsManager: new _Map(),\n      container: instanceRef.current.contentDocument.body,\n      window: () => instanceRef.current.contentWindow\n    });\n  };\n\n  const onContentDidUpdate = () => {\n    instanceRef.current.contentDocument.body.dir = theme.direction;\n  }; // NoSsr fixes a strange concurrency issue with iframe and quick React mount/unmount\n\n\n  return __jsx(NoSsr, null, __jsx(Frame, _extends({\n    ref: handleRef,\n    className: classes.frame,\n    contentDidMount: onContentDidMount,\n    contentDidUpdate: onContentDidUpdate\n  }, other), _ref, state.ready ? __jsx(StylesProvider, {\n    jss: state.jss,\n    sheetsManager: state.sheetsManager\n  }, React.cloneElement(children, {\n    container: state.container,\n    window: state.window\n  })) : null));\n}\n\nconst StyledFrame = withStyles(styles)(DemoFrame);\n/**\n * Isolates the demo component as best as possible. Additional props are spread\n * to an `iframe` if `iframe={true}`.\n */\n\nfunction DemoSandboxed(props) {\n  const {\n    component: Component,\n    iframe,\n    name\n  } = props,\n        other = _objectWithoutProperties(props, [\"component\", \"iframe\", \"name\"]);\n\n  const Sandbox = iframe ? StyledFrame : React.Fragment;\n  const sandboxProps = iframe ? _objectSpread({\n    title: `${name} demo`\n  }, other) : {};\n  return __jsx(DemoErrorBoundary, null, __jsx(Sandbox, sandboxProps, __jsx(Component, null)));\n}\n\nexport default React.memo(DemoSandboxed);","map":null,"metadata":{},"sourceType":"module"}