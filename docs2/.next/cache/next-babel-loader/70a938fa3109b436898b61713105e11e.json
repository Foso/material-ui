{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { withStyles } from \"../../../../packages/material-ui/src/styles\";\nimport Typography from \"../../../../packages/material-ui/src/Typography\";\nimport Paper from \"../../../../packages/material-ui/src/Paper\";\nimport AdCodeFund from \"./AdCodeFund\";\nimport AdCarbon from \"./AdCarbon\";\nimport AdInHouse from \"./AdInHouse\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      position: 'relative',\n      minHeight: 124,\n      maxWidth: 345,\n      display: 'block',\n      marginTop: theme.spacing(4),\n      marginBottom: theme.spacing(3)\n    },\n    paper: {\n      padding: theme.spacing(1.5),\n      border: \"2px solid \".concat(theme.palette.primary.main),\n      backgroundColor: theme.palette.background.level2,\n      display: 'block'\n    }\n  };\n};\n\nfunction Adblock(props) {\n  var t = useSelector(function (state) {\n    return state.options.t;\n  });\n  return __jsx(Paper, _extends({\n    component: \"span\",\n    elevation: 0\n  }, props), __jsx(Typography, {\n    variant: \"body2\",\n    display: \"block\",\n    component: \"span\",\n    gutterBottom: true\n  }, t('likeMui')), __jsx(Typography, {\n    variant: \"body2\",\n    display: \"block\",\n    component: \"span\",\n    gutterBottom: true\n  }, t('adblock')), __jsx(Typography, {\n    variant: \"body2\",\n    display: \"block\",\n    component: \"span\",\n    gutterBottom: true\n  }, t('thanks'), ' ', __jsx(\"span\", {\n    role: \"img\",\n    \"aria-label\": t('emojiLove')\n  }, \"\\u2764\\uFE0F\")));\n}\n\nvar disable = process.env.NODE_ENV !== 'production' && process.env.ENABLE_AD !== 'true';\nvar inHouseAds = [{\n  name: 'scaffoldhub',\n  link: 'https://scaffoldhub.io/?partner=1',\n  img: '/static/in-house/scaffoldhub.png',\n  description: '<b>Scaffold</b><br />Automate building your full-stack Material-UI web-app.'\n}, {\n  name: 'themes-2',\n  link: 'https://material-ui.com/store/?utm_source=material_ui&utm_medium=referral&utm_campaign=in-house-2',\n  img: '/static/in-house/themes-2.jpg',\n  description: '<b>Premium Templates</b><br />Start your project with the best themes for admins, dashboards and more.'\n}, {\n  name: 'themes',\n  link: 'https://material-ui.com/store/?utm_source=material_ui&utm_medium=referral&utm_campaign=in-house',\n  img: '/static/in-house/themes.png',\n  description: '<b>Premium Themes</b><br />Kickstart your application development with a ready-made theme.'\n}, {\n  name: 'tidelift',\n  link: 'https://tidelift.com/subscription/managed-open-source-survey?utm_source=material_ui&utm_medium=referral&utm_campaign=enterprise&utm_content=ad',\n  img: '/static/in-house/tidelift.png',\n  description: '<b>Material-UI for enterprise</b><br />Save time and reduce risk. Managed open source â€” backed by maintainers.'\n}, {\n  name: 'bonsaiilabs',\n  link: 'https://bonsaiilabs.com/courseDetail/material-ui-with-react',\n  img: '/static/in-house/bonsaiilabs.png',\n  description: '<b>Learn Materialâ€‘UI</b><br />A course to learn Material-UI while developing a flight search/booking app.'\n}, {\n  name: 'sketch',\n  link: 'https://material-ui.com/store/items/sketch-react/?utm_source=material_ui&utm_medium=referral&utm_campaign=in-house-sketch',\n  img: '/static/in-house/sketch.png',\n  description: '<b>Sketch</b><br />A large UI kit with over 1,500 handcrafted Material-UI symbols ðŸ’Ž.'\n}];\n\nvar _ref = __jsx(\"span\", null);\n\nvar _ref2 = __jsx(AdCodeFund, null);\n\nvar _ref3 = __jsx(AdCarbon, null);\n\nfunction Ad(props) {\n  var classes = props.classes;\n  var timerAdblock = React.useRef();\n\n  var _React$useRef = React.useRef(Math.random()),\n      randomSplit = _React$useRef.current;\n\n  var _React$useState = React.useState(null),\n      adblock = _React$useState[0],\n      setAdblock = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      carbonOut = _React$useState2[0],\n      setCarbonOut = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      codeFundOut = _React$useState3[0],\n      setCodeFundOut = _React$useState3[1];\n\n  var checkAdblock = React.useCallback(function () {\n    var attempt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n    if (document.querySelector('.cf-wrapper') || document.querySelector('#carbonads') || codeFundOut || carbonOut) {\n      if (document.querySelector('#carbonads a') && document.querySelector('#carbonads a').getAttribute('href') === 'https://material-ui-next.com/discover-more/backers') {\n        setCarbonOut(true);\n      }\n\n      setAdblock(false);\n      return;\n    }\n\n    if (attempt < 30) {\n      timerAdblock.current = setTimeout(function () {\n        checkAdblock(attempt + 1);\n      }, 500);\n    }\n\n    if (attempt > 6) {\n      setAdblock(true);\n    }\n  }, [codeFundOut, carbonOut]);\n  React.useEffect(function () {\n    if (disable) {\n      return undefined;\n    }\n\n    checkAdblock();\n    return function () {\n      clearTimeout(timerAdblock.current);\n    };\n  }, [checkAdblock]);\n  React.useEffect(function () {\n    var handler = function handler(event) {\n      if (event.detail.status === 'no-advertiser') {\n        setCodeFundOut(true);\n      }\n    };\n\n    window.addEventListener('codefund', handler);\n    return function () {\n      window.removeEventListener('codefund', handler);\n    };\n  }, []);\n  var children;\n  var minHeight; // Hide the content to google bot.\n\n  if (/Googlebot/.test(navigator.userAgent) || disable) {\n    children = _ref;\n  }\n\n  if (!children && adblock) {\n    minHeight = 'auto';\n\n    if (Math.random() < 0.2) {\n      children = __jsx(Adblock, {\n        className: classes.paper\n      });\n    } else {\n      children = __jsx(AdInHouse, {\n        ad: inHouseAds[Math.floor(inHouseAds.length * Math.random())]\n      });\n    }\n  }\n\n  if (!children) {\n    if (carbonOut || codeFundOut) {\n      children = __jsx(AdInHouse, {\n        ad: inHouseAds[Math.floor(inHouseAds.length * Math.random())]\n      });\n      minHeight = 'auto';\n    } else if (randomSplit < 0.35) {\n      children = _ref2;\n    } else {\n      children = _ref3;\n    }\n  }\n\n  React.useEffect(function () {\n    // Avoid a flood of events.\n    if (Math.random() < 0.9) {\n      return undefined;\n    }\n\n    var delay = setTimeout(function () {\n      var type;\n\n      if (children.type === AdCodeFund) {\n        type = 'codefund';\n      } else if (children.type === AdCarbon) {\n        type = 'carbon';\n      } else if (children.type === AdInHouse) {\n        if (!adblock && codeFundOut) {\n          type = 'in-house-codefund';\n        } else if (!adblock && carbonOut) {\n          type = 'in-house-carbon';\n        } else {\n          type = 'in-house';\n        }\n      } else if (children.type === Adblock) {\n        type = 'in-house-adblock';\n      } else {\n        return;\n      }\n\n      window.ga('send', {\n        hitType: 'event',\n        eventCategory: 'ad',\n        eventAction: 'display',\n        eventLabel: type\n      });\n\n      if (type.indexOf('in-house') === 0) {\n        window.ga('send', {\n          hitType: 'event',\n          eventCategory: 'in-house-ad',\n          eventAction: 'display',\n          eventLabel: children.props.ad.name\n        });\n      }\n    }, 2500);\n    return function () {\n      clearTimeout(delay);\n    };\n  }, [children.type, children.props.ad, codeFundOut, carbonOut, adblock]);\n  return __jsx(\"span\", {\n    className: classes.root,\n    style: {\n      minHeight: minHeight\n    }\n  }, children);\n}\n\nexport default React.memo(withStyles(styles)(Ad));","map":null,"metadata":{},"sourceType":"module"}